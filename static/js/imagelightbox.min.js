!function(){"use strict";var t=$("<div/>").attr("class","imagelightbox-loading").append($("<div/>")),i=$("<div/>",{class:"imagelightbox-arrow imagelightbox-arrow-left"}),e=$("<div/>",{class:"imagelightbox-arrow imagelightbox-arrow-right"}),n=i.add(e),a=$("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),o=$("<div/>",{class:"imagelightbox-close"}),r=$("<div/>",{class:"imagelightbox-overlay"}),l=$("<a/>",{href:"#",class:"imagelightbox-navitem"}),c=$("<div/>",{class:"imagelightbox-nav"}),s=$("<div/>",{class:"imagelightbox-wrapper"}),d=$("body"),u=function(){var t=(document.body||document.documentElement).style;return""===t.transition?"":""===t.webkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition&&"-o-"},g=!1!==u(),h=function(t,i,e){var n={},a=u()||"";n[a+"transform"]="translateX("+i+") translateY(-50%)",n[a+"transition"]=a+"transform "+e.toString()+"s ease-in",t.css(n)},f="ontouchstart"in window,p=window.navigator,m=p.pointerEnabled||p.msPointerEnabled,b=function(t){if(f)return!0;if(!m||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1},v=document,x=!!(v.fullscreenEnabled||v.webkitFullscreenEnabled||v.mozFullScreenEnabled||v.msFullscreenEnabled),w=!(!window.history||!history.pushState);$.fn.imageLightbox=function(i){var e=0,u=$(),p=!1,v=0,S=$(),y=-1,E=$([]),I="",k=[],q=$.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,history:!1,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},i),C=function(){q.activity&&z(),q.arrows&&n.css("display","block")},L=function(t,i,e){var n=i+"="+e,a="?"+n;if(t){var o=new RegExp("([?&])"+i+"=[^&]*");a=null!==o.exec(t)?t.replace(o,"$1"+n):t+"&"+n}return a},T=function(){if(w&&q.history){var t=E[y].dataset.ilb2Id;t||(t=y.toString());var i={imageLightboxIndex:t,imageLightboxSet:""},e=E[y].dataset.imagelightbox;e&&(i.imageLightboxSet=e);var n=L(document.location.search,"imageLightboxIndex",t);e&&(n=L(n,"imageLightboxSet",e)),window.history.pushState(i,"",document.location.pathname+n)}},O=function(t,i){var e=t;if(e){var n=new RegExp("\\?"+i+"=[^&]*"),a=new RegExp("&"+i+"=[^&]*");e=(e=e.replace(n,"?")).replace(a,"")}return e},P=function(t){var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(document.location.search);if(i&&i[2])return decodeURIComponent(i[2].replace(/\+/g," "))},F=function(){if(w&&q.history){var t=P("imageLightboxIndex");if(t){var i=E.filter('[data-ilb2-id="'+t+'"]');i.length>0?y=E.index(i):(y=parseInt(t),i=$(E[y]));var e=P("imageLightboxSet");!i[0]||e&&e!==i[0].dataset.imagelightbox||j(i,!0)}}},M=function(){if(!p){if(--y<0){if(!0===q.quitOnEnd)return void W();y=E.length-1}S=E.eq(y),T(),s.trigger("previous.ilb2",S),_(1)}},D=function(){if(!p){if(++y>=E.length){if(!0===q.quitOnEnd)return void W();y=0}T(),S=E.eq(y),s.trigger("next.ilb2",S),_(-1)}},R=function(){s.append(t)},z=function(){$(".imagelightbox-loading").remove()},X=function(){s.append(r)},N=function(){o.appendTo(s).on("click.ilb7",(function(){return W(),!1}))},V=function(){a.css("opacity","0"),a.html("&nbsp;"),$(S).data("ilb2-caption")?(a.css("opacity","1"),a.html($(S).data("ilb2-caption"))):$(S).find("img").attr("alt")&&(a.css("opacity","1"),a.html($(S).find("img").attr("alt")))},U=function(){if(E.length){for(var t=0;t<E.length;t++)c.append(l.clone());var i=c.children("a");i.eq(E.index(S)).addClass("active"),s.on("previous.ilb2 next.ilb2",(function(){i.removeClass("active").eq(E.index(S)).addClass("active")})),s.append(c),c.on("click.ilb7 touchend.ilb7",(function(){return!1})).on("click.ilb7 touchend.ilb7","a",(function(){var t=$(this);if(E.eq(t.index()).attr("href")!==$(".imagelightbox").attr("src")){var i=E.eq(t.index());i.length&&(e=E.index(S),S=i,_(t.index()<e?-1:1))}t.addClass("active").siblings().removeClass("active")}))}},K=function(){s.append(n),n.on("click.ilb7 touchend.ilb7",(function(t){t.stopImmediatePropagation(),t.preventDefault(),$(this).hasClass("imagelightbox-arrow-left")?M():D()}))},Y=function(){if(u.length){var t=q.caption?a.outerHeight():0,i=$(window).width(),e=$(window).height()-t,n=Math.abs(1-q.gutter/100),o=u.data("ilb2VideoId"),r=!1;if($.each(k,(function(t,i){o===this.i&&(s(i.w,i.h),r=!0)})),!r){var l=u.get(0);if(void 0===l.videoWidth){var c=new Image;c.src=u.attr("src"),c.onload=function(){s(c.width,c.height)}}else s(l.videoWidth,l.videoHeight)}}function s(t,a){if(t>i||a>e){var o=t/a>i/e?t/i:a/e;t/=o,a/=o}var r=a*n,l=t*n,c=($(window).width()-l)/2;u.css({width:l.toString()+"px",height:r.toString()+"px",left:c.toString()+"px"})}},_=function(t){if(!p){if(u.length){var i={opacity:0};g?h(u,(100*t-v).toString()+"px",q.animationSpeed/1e3):i.left=(parseInt(u.css("left"))+100*t).toString()+"px",u.animate(i,q.animationSpeed,(function(){H()})),v=0}p=!0,q.activity&&R(),q.caption&&V(),setTimeout((function(){var i,e=0,n=0,a=0,o=S.attr("href"),r=S.data("ilb2Video"),l=$();function c(){var i={opacity:1};if(u.appendTo(s),Y(),u.css("opacity",0),g?(h(u,(-100*t).toString()+"px",0),setTimeout((function(){h(u,"0px",q.animationSpeed/1e3)}),50)):(a=parseInt(u.css("left")),i.left=a.toString()+"px",u.css("left",(a-100*t).toString()+"px")),u.animate(i,q.animationSpeed,(function(){p=!1,C()})),q.preloadNext){var e=E.eq(E.index(S)+1);e.length||(e=E.eq(0)),$("<img />").attr("src",e.attr("href"))}s.trigger("loaded.ilb2")}r?$.each(k,(function(t,e){e.i===S.data("ilb2VideoId")&&(i=e.l,l=e.e,e.a&&(!1===i&&l.attr("autoplay",e.a),!0===i&&l.get(0).play()))})):l=$("<img id='"+q.id+"' />").attr("src",o),u=l.on("load.ilb7",c).on("error.ilb7",(function(){C()})).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",(function(t){b(t.originalEvent)&&!q.quitOnImgClick&&(g&&(a=parseInt(u.css("left"))),e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX)})).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",(function(t){!m&&"pointermove"===t.type||!b(t.originalEvent)||q.quitOnImgClick||(t.preventDefault(),n=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,v=e-n,g?h(u,(-v).toString()+"px",0):u.css("left",(a-v).toString()+"px"))})).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",(function(t){b(t.originalEvent)&&!q.quitOnImgClick&&(Math.abs(v)>50?v<0?M():D():g?h(u,"0px",q.animationSpeed/1e3):u.animate({left:a.toString()+"px"},q.animationSpeed/2))})),!0===i&&c(),!1===i&&(u=u.on("loadedmetadata.ilb7",c)),r||(u=u.on(m?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",(function(t){if(t.preventDefault(),q.quitOnImgClick)W();else if(!b(t.originalEvent)){var i=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;t.target.width/3>i?M():D()}})))}),q.animationSpeed+100)}},H=function(){u.length&&(u.remove(),u=$())},j=function(t,i){p||(p=!1,S=t,y=E.index(S),i||T(),q.arrows&&K(),q.navigation&&U(),q.overlay&&X(),q.button&&N(),q.caption&&s.append(a),d.append(s).addClass("imagelightbox-open"),s.trigger("start.ilb2",t),_(0))},W=function(t){void 0===t&&(t=!1),y=-1,t||function(){if(w&&q.history){var t=O(document.location.search,"imageLightboxIndex");t=O(t,"imageLightboxSet"),window.history.pushState({},"",document.location.pathname+t)}}(),s.trigger("quit.ilb2"),d.removeClass("imagelightbox-open"),u.length&&u.animate({opacity:0},q.animationSpeed,(function(){H(),p=!1,s.remove().find("*").remove()}))},B=function(t){t.each((function(){E=t.add($(this))})),t.on("click.ilb7",{set:I},(function(i){i.preventDefault(),I=$(i.currentTarget).data("imagelightbox"),t.filter((function(){return $(this).data("imagelightbox")===I})).filter((function(){return t=$(this),"a"===$(t).prop("tagName").toLowerCase()&&(new RegExp(".("+q.allowedTypes+")$","i").test($(t).attr("href"))||$(t).data("ilb2Video"));var t})).each((function(){E=E.add($(this))})),E.length<1?W():j($(this),!1)}))},A=function(t){t.each((function(){var t=$(this).data("ilb2Video");if(t){var i=$(this).data("ilb2Id");i||(i="a"+(65536*(1+Math.random())|0).toString(16)),$(this).data("ilb2VideoId",i);var e={e:$("<video id='"+q.id+"' preload='metadata' data-ilb2-video-id='"+i+"'>"),i:i,l:!1,a:void 0,h:void 0,w:void 0};$.each(t,(function(t,i){switch(t){case"autoplay":e.a=i;break;case"height":e.h=i;break;case"sources":break;case"width":e.w=i;break;default:e.e=e.e.attr(t,i)}})),t.sources&&$.each(t.sources,(function(t,i){var n=$("<source>");$.each(i,(function(t,i){n=n.attr(t,i)})),e.e.append(n)})),e.e.on("loadedmetadata.ilb7",(function(){e.l=!0})),k.push(e)}}))};return $(window).on("resize.ilb7",Y),w&&q.history&&$(window).on("popstate",(function(t){var i=t.originalEvent.state;if(i){var e=i.imageLightboxIndex;if(void 0!==e){var n=E.filter('[data-ilb2-id="'+e+'"]');if(0!==n.length){var a=E.index(n);if(n[0]&&(!i.imageLightboxSet||i.imageLightboxSet===n[0].dataset.imagelightbox))if(y<0)j(n,!0);else{var o=1;a>y&&(o=-1),S=n,y=a,_(o)}}}else W(!0)}else W(!0)})),$(document).ready((function(){q.quitOnDocClick&&$(document).on(f?"touchend.ilb7":"click.ilb7",(function(t){u.length&&!$(t.target).is(u)&&(t.preventDefault(),W())})),q.fullscreen&&x&&$(document).on("keydown.ilb7",(function(t){var i,e,n,a;u.length&&([9,32,38,40].includes(t.which)&&(t.stopPropagation(),t.preventDefault()),[13].includes(t.which)&&(t.stopPropagation(),t.preventDefault(),i=window.document,e=document.getElementById(q.id).parentElement,n=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,a=i.exitFullscreen||i.mozCancelFullScreen||i.webkitExitFullscreen||i.msExitFullscreen,i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement||i.msFullscreenElement?a.call(i):n.call(e)))})),q.enableKeyboard&&$(document).on("keydown.ilb7",(function(t){u.length&&([27].includes(t.which)&&q.quitOnEscKey&&(t.stopPropagation(),t.preventDefault(),W()),[37].includes(t.which)&&(t.stopPropagation(),t.preventDefault(),M()),[39].includes(t.which)&&(t.stopPropagation(),t.preventDefault(),D()))}))})),$(document).off(".ilb7 .ilb2",q.selector),B($(this)),F(),A(E),this.addToImageLightbox=function(t){B(t),A(t)},this.openHistory=function(){F()},this.loadPreviousImage=function(){M()},this.loadNextImage=function(){D()},this.quitImageLightbox=function(){return W(),this},this.startImageLightbox=function(t){t?t.trigger("click.ilb7"):$(this).trigger("click.ilb7")},this}}();
//# sourceMappingURL=imagelightbox.min.js.map